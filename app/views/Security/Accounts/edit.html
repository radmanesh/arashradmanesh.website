#{extends 'layout.html' /}
#{set 'title'} &{'accounts.AccountsPageTitle'} #{/set}

#{set 'moreStyles'}
#{/set}

<div class="row">
  <div class="col-md-12">
    <div class="page-header">
      <h2>
        &{'accounts.AccountsPageTitle'}
      </h2> 
    </div> <!-- /.page-header -->

    <div class="panel panel-default">
      <div class="panel-body">
        
        <form method="POST" action="@{security.Accounts.update(account.id)}" id="new-card-form">
          <!-- Full Name -->
          <div class="row" style="padding-bottom:5px;">
            <div class="col-md-12">
              <input id="fullname" name="account.fullname" type="text" class="form-control" placeholder="&{'accounts.FullName'}" value="${account.fullname}" autocomplete="off" />
            </div>
          </div> <!-- /.form-group -->
  
          <!-- Email & password (cont.) -->
          <div class="row" style="padding-bottom:5px;">
            <div class="col-md-6">
              <input id="email_disabled" name="email_disabled" type="text" class="form-control" placeholder="&{'accounts.Email'}" value="${account.email}" disabled autocomplete="off" />
            </div>
            <div class="col-md-6">
              <input id="password" name="password" type="password" class="form-control" placeholder="&{'accounts.NewPassword'}" autocomplete="off" />
            </div>
          </div> <!-- /.form-group -->

          <!-- Level -->
          <div class="row" style="padding-bottom:5px;">
            <div class="col-md-6">
              <select name="account.role" class="form-control" >
                %{ models.AccountRole.values().each(){ }%
                <option title="${it.name()}" value="${it.name()}" ${it.equals(account.role) ? 'selected' : ''}>&{"onto.auth."+it.toString()}</option>
                %{ } }%
              </select>
            </div>
            <div class="col-md-6">
              #{if account.confirmed}
              <p>&{'accounts.AccountsConfirmed'} <i class="fa fa-check"></i></p>
              #{/if}
              #{else}
              <p class="text-danger">&{'accounts.AccountIsNotConfirmed'} <i class="fa fa-exclamation-circle"></i></p>
              #{/else}
            </div>
          </div> <!-- /.form-group -->

          <!-- Activate/Deactivate -->
          <div class="row" style="padding-bottom:5px;">
            <div class="col-md-12">
              <button type="submit" class="btn btn-default btn-grayscale" id="submit-btn">&{'accounts.Save'}</button>
              <a href="@{security.Accounts.index}" class="btn btn-default">&{'accounts.Cancel'}</a>
              #{secure.check models.AccountRole.ADMINISTRATOR}
                #{if account.role.ordinal() < models.AccountRole.ADMINISTRATOR.ordinal()}
                  #{if account.confirmed}
                  <a href="@{security.Accounts.deactivate(account.id)}" class="btn btn-default btn-grayscale pull-left">&{'accounts.DeactivateAccount'}</a>
                  #{/if}
                  #{else}
                  <a href="@{security.Accounts.activate(account.id)}" class="btn btn-default btn-grayscale pull-left">&{'accounts.ActivateAccount'}</a>              
                  #{/else}
                #{/if}
              #{/secure.check}
            </div>
          </div> <!-- /.form-group -->          
        </form>
      </div> <!-- /.panel-body -->
    </div> <!-- /.panel -->
  </div> <!-- /.col-md-12 -->
</div> <!-- /.row -->

#{set 'moreScripts'}
#{/set}
